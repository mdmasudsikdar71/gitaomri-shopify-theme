<!doctype html>
<html lang="en">
<head>
  {% render 'head-tag' %}

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  {{ 'bootstrap.min.css' | asset_url | stylesheet_tag }}
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.css"/>
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css"/>
  {{ 'all.min.css' | asset_url | stylesheet_tag }}
  {{ 'style.css' | asset_url | stylesheet_tag }}


  {{ 'jquery-1.12.4.min.js' | asset_url | script_tag }}
  {{ 'bootstrap.bundle.min.js' | asset_url | script_tag }}
  {{ 'all.min.js' | asset_url | script_tag }}
  {{ 'app.js' | asset_url | script_tag }}
  <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

  <!-- Boost 1.6.17 -->
  <meta name="theme-color" content="{{ settings.primary_btn_background }}">

  {% capture seo_title %}
    {{ page_title }}
    {% if current_tags %}
      {%- assign meta_tags = current_tags | join: ', ' %} &ndash; {{ 'general.meta.tags' | t: tags: meta_tags -}}
    {% endif %}
    {% if current_page != 1 %}
      &ndash; {{ 'general.meta.page' | t: page: current_page }}
    {% endif %}
    {% unless page_title contains shop.name %}
      &ndash; {{ shop.name }}
    {% endunless %}
  {% endcapture %}
  <title>{{ seo_title }}</title>

  {% render 'social-meta-tags' %}

  {{ content_for_header }} <!-- Header hook for plugins -->
</head>
<body>

{% include 'header' %}
    {% comment %}
      {% for link in linklists.main-menu.links %}
        {% assign child_list_handle = link.title | handleize %}
        {% if linklists[child_list_handle].links != blank %}
          <a href="{{ link.url }}">{{ link.title }}</a>
          [{% for childlink in linklists[child_list_handle].links %}
            <a href="{{ childlink.url }}">{{ childlink.title | escape }}</a>
          {% endfor %}]
        {% else %}
          <a href="{{ link.url }}">{{ link.title }}</a>
        {% endif %}
      {% endfor %}

      <a href="/cart">cart</a>

      {% if shop.customer_accounts_enabled %}
        {% if customer %}
          <a href="/account">account</a>
          {{ 'log out'  | customer_logout_link }}
        {% else %}
          {{ 'log in ' | customer_login_link }}
          {{ 'register' | customer_register_link }}
        {% endif %}
      {% endif %}
    {% endcomment %}
  <main role="main">
    {{ content_for_layout }}
  </main>

{% include 'footer' %}

<script>
  AOS.init();

  var cartContents = fetch(window.Shopify.routes.root + 'cart.js')
          .then(response => response.json())
          .then(data => {
            $('.item-count-number').text(data.item_count)
            $('.item_total_price_class').text("{{ " + data.total_price + " | t | money }}")
            {% assign my_string = data.total_price %}
            console.log(data.total_price, "{{ my_string | money }}")

            return data
          });


  function cartAddedFunc() {
    fetch(window.Shopify.routes.root + 'cart.js')
            .then(response => response.json())
            .then(data => {
              $('.item-count-number').text(data.item_count)
              $('.RightSideBarCart').fadeOut(800, function(){
                $('.RightSideBarCart').html().fadeIn().delay(2000);
              });


              return data
            });
  }

  function clearFromCart(id, quantity) {
    console.log(id, quantity)
    let formdata = new FormData();
    formdata.append("id", id);
    formdata.append("quantity", quantity);
    fetch(window.Shopify.routes.root + 'cart/change.js', {
      method: 'POST',
      body: formdata
    }).then(response => {
      cartAddedFunc();
      return response.json();
    })
    .catch((error) => {
      console.error('Error:', error);
    });
  }

  function updateCart(type, id)
  {
    if(type == 'plus'){
      $('.' + id).val(parseInt($('.' + id).val()) + 1)
    } else {
      $('.' + id).val(parseInt($('.' + id).val()) - 1)
    }

    clearFromCart(id, $('.' + id).val())
  }


</script>
</body>
</html>
