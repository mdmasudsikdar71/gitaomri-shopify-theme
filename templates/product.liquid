{% comment %}
{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}
<img src="{{ featured_image | img_url: 'large' }}" alt="{{ featured_image.alt | escape }}" id="ProductPhotoImg">
{% for image in product.images %}
  <a href="{{ image.src | img_url: 'large' }}">
    <img src="{{ image.src | img_url: 'compact' }}" alt="{{ image.alt | escape }}">
  </a>
{% endfor %}
<h1>{{ product.title }}</h1>
<form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm">
  <select name="id" id="productSelect">
    {% for variant in product.variants %}
      {% if variant.available %}
        <option value="{{ variant.id }}">
          {{ variant.title }} - {{ variant.price | money_with_currency }}
        </option>
      {% else %}
        <option disabled="disabled">
          {{ variant.title }} - sold out
        </option>
      {% endif %}
    {% endfor %}
  </select>
  {{ current_variant.price | money }}
  <label for="Quantity">quantity</label>
  <input type="number" id="Quantity" name="quantity" value="1" min="1">
  <button type="submit" name="add" id="AddToCart">Add to cart</button>
</form>
<div>{{ product.description }}</div>

{% endcomment %}

<style>
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        padding-top: 100px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: black;
    }

    /* Modal Content */
    .modal-content {
        position: relative;
        background-color: #fefefe;
        margin: auto;
        padding: 0;
        width: 90%;
        max-width: 1200px;
    }

    /* The Close Button */
    .close {
        color: white;
        position: absolute;
        top: 10px;
        right: 25px;
        font-size: 35px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: #999;
        text-decoration: none;
        cursor: pointer;
    }

    .mySlides {
        display: none;
    }

    .cursor {
        cursor: pointer;
    }

    /* Next & previous buttons */
    .prev,
    .next {
        cursor: pointer;
        position: absolute;
        top: 50%;
        width: auto;
        padding: 16px;
        margin-top: -50px;
        color: white;
        font-weight: bold;
        font-size: 20px;
        transition: 0.6s ease;
        border-radius: 0 3px 3px 0;
        user-select: none;
        -webkit-user-select: none;
    }

    /* Position the "next button" to the right */
    .next {
        right: 0;
        border-radius: 3px 0 0 3px;
    }

    /* On hover, add a black background color with a little bit see-through */
    .prev:hover,
    .next:hover {
        background-color: rgba(0, 0, 0, 0.8);
    }

    /* Number text (1/3 etc) */
    .numbertext {
        color: #f2f2f2;
        font-size: 12px;
        padding: 8px 12px;
        position: absolute;
        top: 0;
    }

    img {
        margin-bottom: -4px;
    }

    .caption-container {
        text-align: center;
        background-color: black;
        padding: 2px 16px;
        color: white;
    }

    .demo {
        opacity: 0.6;
    }

    .active,
    .demo:hover {
        opacity: 1;
    }

    img.hover-shadow {
        transition: 0.3s;
    }

    .hover-shadow:hover {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }
</style>

{% assign current_variant = product.selected_or_first_available_variant %}
{% assign featured_image = current_variant.featured_image | default: product.featured_image %}

<section class="ProductDetails">

    <div class="container">

        <div class="row">

            <div class="col-lg-12">

                <div class="Header">
                    <h6><a href="/">Home</a><span> / </span>{{ product.title }}</h6>
                </div>

            </div>

        </div>

        <!-- ProductDetailsContent -->
        <div class="ProductDetailsContent">

            <div class="row">

                <!-- img -->
                <div class="col-lg-7">

                    <div class="ProductDetailsImg">

                        <!-- Main -->
                        <div style="--swiper-navigation-color: #fff; --swiper-pagination-color: #fff" class="swiper ProductSwiper2">

                            <div class="swiper-wrapper">
                                {% for image in product.images %}
                                    <div class="swiper-slide">
                                        <img src="{{ image.src | img_url: '413x375' }}" style="width: 413px; height: 375px;" alt="{{ image.alt | escape }}" onclick="productPhotoZoom('{{ product.handle }}')"/>
                                    </div>
                                {% endfor %}
                                <!-- img -->

                            </div>

                        </div>

                        <!-- thumbsSlider -->
                        <div thumbsSlider="" class="swiper ProductSwiper">

                            <div class="swiper-wrapper">

                                {% for image in product.images %}
                                    <div class="swiper-slide">
                                        <img src="{{ image.src | img_url: '500x375' }}" alt="{{ image.alt | escape }}"/>
                                    </div>
                                {% endfor %}

                            </div>

                        </div>

                        <!-- text -->
                        <div class="text">

                            <!-- item -->
                            <div class="textItem">
                                {{ product.description }}
                            </div>

                        </div>


                    </div>

                </div>

                <!-- Content -->
                <div class="col-lg-5">

                    <div class="ModalContent">

                        <h3>{{ product.title }}</h3>
                        {% if product.price_varies %}
                            <h4>{{ product.price_min | money }} - {{ product.price_max | money }}</h4>
                        {% else %}
                            <h4>{{ product.price | money }}</h4>
                        {%endif%}

                        <form action="/cart/add" method="post" enctype="multipart/form-data" id="AddToCartForm">

                                {% if product.has_only_default_variant != true -%}
                                    {% for option in product.options_with_values -%}
                                    <!-- item -->
                                    <div class="CustomeInput">
                                        {% if option.name != "Color" %}
                                            <label> {{ option.name }}</label>
                                            <select class="{{ option.name }}" name="{{ option.name }}" onchange="combineVariant()">
                                                {% for value in option.values %}
                                                    <option {% if option.selected_value == value %}selected{% endif %} value="{{ value }}">
                                                        {{ value }}
                                                    </option>
                                                {% endfor %}
                                            </select>
                                        {% else %}
                                            <label> {{ option.name }}</label>
                                            <div class="radioInput d_flex">
                                                {% for value in option.values %}
                                                    <input type="radio" value="{{ value }}" {% if option.selected_value == value %}checked{% endif %} style="--main_color2: {{ value }};" class="{{ option.name }}" name="{{ option.name }}" onclick="combineVariant()">
                                                {% endfor %}
                                            </div>
                                        {% endif %}
                                    </div>
                                    {% endfor %}
                                {% endif %}

                            <!-- item -->
                            <div class="CustomeInput">

                                <select style="display: none" id="id">
                                    {% for option in product.variants -%}
                                        <option {% if option.selected %}selected{% endif %} value="{{ option.id }}">{{ option.title }}</option>
                                    {% endfor %}
                                </select>

                                <label for="quantity">Quantity</label>
                                <input type="number" id="quantity" value="1" min="1" class="Quantity">

                            </div>

                            <!-- item -->
                            <div class="CustomeInput">
                                <button type="submit" name="add" id="AddToCart" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight">Add to cart</button>
                            </div>

                            <!-- item -->
                            <div class="CustomeInput">

                                <div class="SocialIcon">

                                    <a target="_top" href="">
                                        {{ 'whatsapp.png' | asset_url | img_tag }}
                                    </a>
                                    <a target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://{{ request.host }}{{ product.url }}">
                                        {{ 'facebook.png' | asset_url | img_tag }}
                                    </a>
                                    <a href="">
                                        {{ 'twitter.png' | asset_url | img_tag }}
                                    </a>
                                    <a href="">
                                        {{ 'pinterest.png' | asset_url | img_tag }}
                                    </a>

                                </div>

                            </div>

                        </form>

                    </div>

                </div>

            </div>

        </div>

    </div>

</section>


<div id="imageModal" class="modal fade" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    {% comment %}<span class="close cursor" onclick="closeModal()">&times;</span>{% endcomment %}
    <div class="modal-dialog">
        <div class="modal-content">

            {% for image in product.images %}
                <div class="mySlides">
                    <div class="numbertext">1 / 4</div>
                    <img src="{{ image.src | img_url }}" style="width:100%" />
                </div>
            {% endfor %}

            <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next" onclick="plusSlides(1)">&#10095;</a>

            <div class="caption-container">
                <p id="caption"></p>
            </div>

            {% for image in product.images %}
                <div class="column">
                    <img class="demo cursor" src="{{ image.src | img_url }}" style="width:100%" onclick="currentSlide(1)" alt="Nature and sunrise">
                </div>
            {% endfor %}

        </div>
    </div>
</div>

<script>
    window.onload = combineVariant();

    function combineVariant ()
    {
        let allData = JSON.parse(JSON.stringify($('#AddToCartForm').serializeArray()));

        let items = []
        allData.forEach((item, index)=>{
            items.push(item.value)
        })

        let ItemsJoin = items.join(' / ');

        console.log(ItemsJoin)

        $("#id option:contains('" + ItemsJoin + "')").filter(function(i){
                return $(this).text() == ItemsJoin;
            }).prop("selected","selected")

        // $("#id option:contains(" + ItemsJoin + ")").prop("selected","selected")

        console.log($('#id').val())
    }

    function productPhotoZoom(handle) {
        jQuery.getJSON(window.Shopify.routes.root + 'products/' + handle + '.js', function(product) {
            console.log(product);
            $('#imageModal').modal('show')
        })
    }

    let  slideIndex = 1;

    function plusSlides(n) {
        showSlides(slideIndex += n);
    }

    function currentSlide(n) {
        showSlides(slideIndex = n);
    }

    function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("demo");
        var captionText = document.getElementById("caption");
        if (n > slides.length) {slideIndex = 1}
        if (n < 1) {slideIndex = slides.length}
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex-1].style.display = "block";
        dots[slideIndex-1].className += " active";
        captionText.innerHTML = dots[slideIndex-1].alt;
    }
</script>
<script type="module">
    import { cartRequestAdd } from '{{ "liquid-ajax-cart-v1.10.3.js" | asset_url }}'

    $('#AddToCart').on('click', function (e) {
        e.preventDefault();

        cartRequestAdd({
            items: [
                {
                    id: $('#id').val(),
                    quantity: $('#quantity').val()
                }
            ]
        });

    })
</script>